package org.codeforafrica.citizenreporter.eNCA.ui.notifications;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.support.v4.app.NotificationManagerCompat;

<<<<<<< HEAD:WordPress/src/main/java/org/codeforafrica/citizenreporter/eNCA/ui/notifications/NotificationDismissBroadcastReceiver.java
import org.codeforafrica.citizenreporter.eNCA.GCMIntentService;
=======
import org.wordpress.android.GCMMessageService;
>>>>>>> upstream/master:WordPress/src/main/java/org/wordpress/android/ui/notifications/NotificationDismissBroadcastReceiver.java

/*
 * Clears the notification map when a user dismisses a notification
 */
public class NotificationDismissBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        int notificationId = intent.getIntExtra("notificationId", 0);
        if (notificationId == GCMMessageService.GROUP_NOTIFICATION_ID) {
            GCMMessageService.clearNotifications();
        } else {
            GCMMessageService.removeNotification(notificationId);
            // Dismiss the grouped notification if a user dismisses all notifications from a wear device
            if (!GCMMessageService.hasNotifications()) {
                NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);
                notificationManager.cancel(GCMMessageService.GROUP_NOTIFICATION_ID);
            }
        }
    }
}
